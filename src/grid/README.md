# WEB 前端微件化开发模式(WIP)

## 术语

- 微件: 可依托特定环境/平台运行的小型独立应用程序, 高内聚, 仅通过有限的方式与特定环境/平台通信
- 项目: 微件开发模式完成的应用程序(宽/大屏网页, 跨平台桌面(electron), 跨平台移动 APP 及小程序 )
- 微件可视化平台: 管理微件, 提供微件运行环境、微件 api; 可视化配置及管理项目, 包括页面(url)、页面布局、配置微件(含微件间通信)等; 生成/呈现项目

现只考虑宽/大屏网页, 暂不拆分微件库, 即微件库内置

## 1. 规范

开发规范, 包括全局组件、全局样式及换肤支持等公共 api, 微件开发规范(详见微件库)等
微件格式, 微件包文件结构及注册入口

## 2. 平台

- 开放平台(互联网) vs 封闭平台(部署到用户环境)
- 统一通过平台访问各项目(网页) + 导出项目(网页)单独部署？

## 3. 集中 vs 分散

- 集中: 上传微件包(库)至平台使用
- 分散: 官方微件库 + 非官方微件库

## 4. 待解决问题

### 4.1 沙盒

同一项目直接通过 webpackJsonp+webpackRequire 机制管理模块依赖即可, 若存在多个微件库或允许上传微件, 就需要沙盒机制, 此时需要考虑以下问题:

- 依赖冲突: 微件(库)间可能出现依赖冲突(因 hash 碰撞), 导致运行不稳定、出现错误甚至致命错误.
- 资源复用, 微件可复用已有模块, 比如 eCharts core 及基础图形等
- 性能, 包括资源复用、渲染性能调优等

_或可扩展 webpackJsonp+webpackRequire_

### 4.2 微件库

微件库分离, 作为独立项目, 需要考虑以下问题

- 开发模式及规范
- 工具链及开发调试, 包括微件 API 的 TypeScript 支持
